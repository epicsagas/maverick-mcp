# MaverickMCP 기여하기

MaverickMCP에 오신 것을 환영합니다! 오픈소스 금융 분석 MCP 서버에 기여해주셔서 기쁩니다.

## 목차

- [개발 환경 설정](#개발-환경-설정)
- [프로젝트 구조](#프로젝트-구조)
- [테스트 실행](#테스트-실행)
- [코드 스타일](#코드-스타일)
- [변경 사항 작성](#변경-사항-작성)
- [Pull Request 제출](#pull-request-제출)
- [이슈 보고](#이슈-보고)
- [금융 도메인 가이드라인](#금융-도메인-가이드라인)

## 개발 환경 설정

### 사전 요구사항

- Python 3.12+
- 의존성 관리를 위한 [uv](https://docs.astral.sh/uv/)
- PostgreSQL (선택사항, 개발 시 SQLite 사용 가능)
- Redis (개발용 선택사항)

### 빠른 시작

1. **저장소 클론**

   ```bash
   git clone https://github.com/wshobson/maverick-mcp.git
   cd maverick-mcp
   ```

2. **의존성 설치**

   ```bash
   uv sync --extra dev
   ```

3. **환경 설정**

   ```bash
   cp .env.example .env
   # .env 파일을 편집하여 설정
   ```

4. **개발 서버 시작**
   ```bash
   make dev
   # 또는: ./scripts/start-backend.sh --dev
   ```

### 개발 명령어

- `make dev` - 모든 것을 시작 (권장)
- `make test` - 유닛 테스트 실행 (5-10초)
- `make lint` - 코드 품질 검사
- `make format` - 코드 자동 포맷팅
- `make typecheck` - 타입 체크 실행

### Pre-commit Hooks (선택사항이지만 권장)

코드 품질을 보장하기 위한 pre-commit hooks를 제공합니다:

```bash
# pre-commit 설치 (한 번만)
pip install pre-commit

# 이 저장소에 hooks 설치
pre-commit install

# 모든 파일에 hooks 실행 (선택사항)
pre-commit run --all-files
```

Pre-commit hooks는 모든 커밋에서 자동으로 실행되며 다음을 포함합니다:

- 코드 포맷팅 (ruff)
- 린팅 (ruff)
- 보안 스캔 (bandit, safety)
- 커스텀 금융 도메인 검증

**참고**: Pre-commit hooks는 기여자에게는 선택사항이지만 유지보수자에게는 권장됩니다.

## 프로젝트 구조

MaverickMCP는 도메인 주도 설계(DDD) 원칙을 따릅니다:

```
maverick_mcp/
├── api/           # FastAPI 라우터 및 서버
├── domain/        # 핵심 비즈니스 로직 (엔티티, 서비스)
├── application/   # 유즈케이스 및 DTO
├── infrastructure/# 외부 서비스 (데이터베이스, API)
├── auth/         # 인증 및 보안
├── config/       # 설정 및 구성
└── tests/        # 테스트 스위트
```

## 테스트 실행

여러 테스트 카테고리로 pytest를 사용합니다:

```bash
# 유닛 테스트만 (빠름, ~5-10초)
make test

# 통합 테스트를 포함한 모든 테스트
make test-all

# 특정 테스트
make test-specific TEST=test_name

# 커버리지 포함
pytest --cov=maverick_mcp
```

**참고**: 통합 테스트는 PostgreSQL과 Redis가 필요합니다. CI에서는 기본적으로 제외됩니다.

## 코드 스타일

엄격한 코드 품질 표준을 적용합니다:

### 도구

- **ruff** - 린팅 및 포맷팅
- **pyright** - 타입 체크
- **pytest** - 테스트

### 가이드라인

1. **타입 힌트**: 모든 함수와 변수에 필수
2. **Docstrings**: 공개 API에 Google 스타일 docstrings
3. **에러 처리**: 특정 에러 타입을 사용한 적절한 예외 처리
4. **보안**: 비밀을 하드코딩하지 말고 항상 환경 변수 사용

### 제출 전 확인

```bash
# 모든 품질 검사 실행
make check  # lint + typecheck 실행

# 코드 자동 포맷팅
make format
```

## 변경 사항 작성

### 개발 워크플로우

1. **이슈로 시작** - 이슈를 생성하거나 기존 이슈 찾기
2. **브랜치 생성** - 설명적 브랜치 이름 사용:

   - `feature/add-new-indicator`
   - `fix/authentication-bug`
   - `docs/improve-setup-guide`

3. **집중된 커밋** - 커밋당 하나의 논리적 변경
4. **테스트 작성** - 새 기능이나 버그 수정에 대한 테스트 추가
5. **문서 업데이트** - 변경사항에 맞춰 문서 최신화

### 금융 계산

금융 로직 작업 시:

- **정확성이 중요** - 모든 계산을 두 번 확인
- **적절한 데이터 타입 사용** - 통화에는 `Decimal`, 비율에는 `float`
- **검증 포함** - 입력 범위 및 엣지 케이스 검증
- **포괄적인 테스트 추가** - 엣지 케이스 및 경계 조건 테스트
- **가정 문서화** - docstring에 금융 로직 설명

## Pull Request 제출

### 체크리스트

- [ ] 테스트 통과 (`make test`)
- [ ] 코드 포맷팅 완료 (`make format`)
- [ ] 타입 체크 통과 (`make typecheck`)
- [ ] Pre-commit hooks 통과 (`pre-commit run --all-files`)
- [ ] 문서 업데이트
- [ ] 금융 계산 검증
- [ ] 하드코딩된 비밀 또는 자격 증명 없음

### PR 템플릿

```markdown
## 설명

변경사항에 대한 간단한 설명

## 변경 유형

- [ ] 버그 수정
- [ ] 새 기능
- [ ] 문서 업데이트
- [ ] 리팩토링

## 금융 영향

- [ ] 금융 계산에 영향 없음
- [ ] 금융 계산 정확성 검증 완료
- [ ] 테스트와 함께 새로운 금융 계산 추가

## 테스트

- [ ] 유닛 테스트 추가/업데이트
- [ ] 통합 테스트 추가 (해당되는 경우)
- [ ] 수동 테스트 완료

## 스크린샷 (해당되는 경우)
```

## 이슈 보고

### 버그 보고

버그 보고 템플릿을 사용하고 다음을 포함하세요:

- **환경 정보** (Python 버전, OS, 의존성)
- **재현 단계** - 명확하고 최소한의 재현 단계
- **예상 vs 실제 동작**
- **에러 메시지** - 가능한 전체 스택 트레이스
- **금융 컨텍스트** - 계산이나 시장 데이터와 관련된 경우

### 기능 요청

다음을 포함하세요:

- **사용 사례** - 어떤 문제를 해결하는가?
- **제안된 솔루션** - 어떻게 작동해야 하는가?
- **금융 도메인 지식** - 도메인별 요구사항
- **구현 고려사항** - 기술적 제약이나 선호사항

## 금융 도메인 가이드라인

### 시장 데이터

- **속도 제한 존중** - 모든 제공자가 API 제한이 있음
- **적절한 캐싱** - 신선도와 성능 균형
- **시장 휴무 처리** - 주말 및 공휴일 고려
- **심볼 검증** - 티커 심볼 형식 확인

### 기술 지표

- **확립된 공식 사용** - 업계 표준 계산 따르기
- **데이터 요구사항 문서화** - 필요한 최소 기간 명시
- **엣지 케이스 처리** - 제로로 나누기, 데이터 부족
- **실제 시장 데이터로 테스트** - 알려진 예시로 검증

### 리스크 관리

- **포지션 사이징** - 적절한 리스크 제어 구현
- **손절 가격 계산** - 정확한 리스크/보상 비율
- **포트폴리오 제한** - 최대 포지션 크기 존중
- **백테스팅 정확도** - 미래 정보 활용 편향 피하기

### 기여자를 위한 금융 규정 준수

- **교육 목적**: 모든 금융 계산 및 분석 도구는 교육 목적으로 명확히 표시되어야 함
- **투자 조언 없음**: 투자 권고사항으로 해석될 수 있는 언어 사용 금지
- **면책 조항 요구사항**: 금융 함수의 docstring에 적절한 면책 조항 포함
- **데이터 출처 표시**: 데이터 출처 적절히 인용 (Tiingo, Yahoo Finance, FRED 등)
- **리스크 경고**: 포트폴리오 및 트레이딩 관련 기능에 대한 문서에 리스크 경고 포함
- **규제 인식**: 증권 규제 (SEC, CFTC, 국제 동등 규제) 주의

#### 금융 함수 문서화 템플릿

```python
def calculate_risk_metric(data: pd.DataFrame) -> float:
    """
    금융 리스크 지표를 계산합니다.

    면책 조항: 이것은 교육 목적으로만 사용되며
    금융 조언을 구성하지 않습니다. 과거 실적은 미래 결과를
    보장하지 않습니다.

    Args:
        data: 역사적 가격 데이터

    Returns:
        리스크 지표 값
    """
```

## 아키텍처 가이드라인

### 도메인 주도 설계

- **도메인 레이어** - 순수 비즈니스 로직, 외부 의존성 없음
- **애플리케이션 레이어** - 유즈케이스 및 오케스트레이션
- **인프라 레이어** - 데이터베이스, API, 외부 서비스
- **API 레이어** - HTTP 핸들러, 검증, 직렬화

### MCP 통합

- **도구 설계** - 각 도구는 단일하고 명확한 목적을 가져야 함
- **리소스 관리** - 적절한 캐싱 및 정리 구현
- **에러 처리** - 의미 있는 에러 메시지 반환
- **문서화** - 사용 예제 및 매개변수 설명 포함

## 도움 받기

- **토론** - 질문에 GitHub Discussions 사용
- **이슈** - 버그 또는 기능 요청에 대한 이슈 생성
- **코드 리뷰** - PR 리뷰에 참여하여 배우기
- **문서** - 기존 문서 및 CLAUDE.md에서 프로젝트 컨텍스트 확인

## 오픈소스 기여

### 커뮤니티 표준

MaverickMCP는 [Contributor Covenant 행동 강령](https://www.contributor-covenant.org/version/2/1/code_of_conduct/)을 따릅니다:

- **환영** - 신규 참여자를 환영하는 도움
- **존중** - 모든 기여자를 존중하는 태도
- **인내** - 응답 및 리뷰를 위한 시간 허용
- **건설적** - 프로젝트 개선에 집중
- **포용적** - 다양한 관점과 배경 환영

### 인정

기여자는 여러 방식으로 인정받습니다:

- **CHANGELOG.md** - 릴리스 노트에 모든 기여자 목록
- **GitHub 기여자** - 커밋을 통한 자동 인정
- **특별 언급** - README에서 우수한 기여 하이라이트
- **명예의 전당** - 문서에 주요 기여자 피처링

### 지속적 통합

CI/CD 파이프라인이 코드 품질을 보장합니다:

- **자동화된 테스트** - 모든 PR에서 포괄적인 테스트 스위트 실행
- **보안 스캔** - 자동화된 취약점 탐지
- **코드 품질 검사** - 린팅, 포맷팅, 타입 체크
- **성능 테스트** - PR에서 벤치마크 검증
- **문서 검증** - 문서가 최신 상태 유지 확인

### 현재 아키텍처 (개인 사용을 위한 간소화)

MaverickMCP는 정리되고 간소화되었습니다:

- **복잡한 인증 없음**: 간단함을 위해 엔터프라이즈 JWT/OAuth 시스템 제거
- **빌링 시스템 없음**: 개인 사용 중심, 구독 관리 없음
- **로컬 우선**: Claude Desktop과 로컬에서 실행되도록 설계
- **교육 중심**: 학습 및 개인 금융 분석을 위한 구축
- **깨끗한 의존성**: 불필요한 엔터프라이즈 기능 제거

이로 인해 기여자가 코드베이스에 접근하기 훨씬 쉬워졌습니다!

## 라이선스

기여함으로써 귀하는 귀하의 기여가 MIT 라이선스 하에 라이선스될 것에 동의합니다.

## 기여자를 위한 금융 소프트웨어 면책 조항

**중요**: MaverickMCP에 기여함으로써 귀하는 다음을 인정합니다:

- 모든 금융 분석 도구는 교육 목적으로만 사용됨
- 콘텐츠는 투자 조언이나 권고사항으로 해석되어서는 안 됨
- 기여자는 사용자의 투자 결정이나 결과에 대해 책임지지 않음
- 모든 금융 계산에는 적절한 면책 조항 및 리스크 경고가 포함되어야 함
- 데이터 정확성을 보장할 수 없으며 사용자는 정보를 독립적으로 확인해야 함

기여자는 LICENSE 파일과 README.md의 전체 금융 면책 조항을 검토해야 합니다.

## 인정

기여자는 CHANGELOG에서 인정받으며 프로젝트 문서에 피처링될 수 있습니다. 코드, 문서, 이슈 보고에 이르기까지 모든 기여를 감사합니다!

---

MaverickMCP에 기여해주셔서 감사합니다! 귀하의 노력은 정교한 금융 분석 도구를 모두가 이용할 수 있게 만드는 데 도움이 됩니다.
